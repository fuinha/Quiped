(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/loader.584b607f.gif"},35:function(e,t,a){e.exports=a(63)},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(29),i=a.n(o),l=(a(40),a(20)),s=a(12),r=(a(22),a(5)),m=a.n(r);function u(){return c.a.createElement("footer",{className:"fixed-bottom bg-info  w-100 d-flex justify-content-between p-2"},c.a.createElement("p",{className:"small text-white"},"\xa9 Copyright 2020, All rights reserved."),c.a.createElement("p",{className:"small text-white"},"Made with \u2665 by Sudhir"))}var d=a(16),p=c.a.createContext(),f=function(e){var t=e.children,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],l=o[1],s=Object(n.useState)(""),r=Object(d.a)(s,2),u=r[0],f=r[1];return Object(n.useEffect)(function(){m.a.auth().onAuthStateChanged(function(e){l(!!e),f(e)})},[]),c.a.createElement(p.Provider,{value:{user:u,signIn:i}},t)},b=a(30),h=a.n(b);m.a.apps.length||m.a.initializeApp({apiKey:"AIzaSyBDlpHzVdhhdvX41O5l642UpTH-1ycZQ0k",authDomain:"quiped-4d0e3.firebaseapp.com",databaseURL:"https://quiped-4d0e3.firebaseio.com",projectId:"quiped-4d0e3",storageBucket:"quiped-4d0e3.appspot.com",messagingSenderId:"780974138254",appId:"1:780974138254:web:1ec3792d7a20d0bf633adf",measurementId:"G-SYF0K0H7X9"});var v=function(){var e=Object(n.useContext)(p).signIn,t={signInFlow:"popup",signInOptions:[m.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}};return e?c.a.createElement(s.a,{to:"/dashboard"}):c.a.createElement("div",{className:"bg"},c.a.createElement("div",{className:"d-flex flex-column justify-content-center  align-items-center h-75"},c.a.createElement("h1",{className:"font-weight-bold title"},"Quiped"),c.a.createElement("h6",{className:"text-capitalize text-white tag"},"conference room management application."),c.a.createElement(h.a,{uiConfig:t,firebaseAuth:m.a.auth()})),c.a.createElement(u,null))},E=a(11),g=a.n(E);function x(e){var t=e.src,a=e.onClick,n=e.stats,o=e.style;return c.a.createElement("div",{className:"pb-3"},c.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-90"},c.a.createElement("h6",{className:"my-3 font-weight-bold",style:o},"Occupancy Status: ",n," available "),c.a.createElement("div",null,c.a.createElement("img",{src:t,alt:"profile",className:"profile"}),c.a.createElement("button",{onClick:a},c.a.createElement("p",{className:"logout"},"Sign Out")))),c.a.createElement("li",{className:"small text-dark"},"Rooms already occupied by other members can't be occupied."),c.a.createElement("li",{className:"small text-dark"},"You can only occupy one vacant room at a time."),c.a.createElement("li",{className:"small text-dark"},"Extend button would be visible five minutes before the end time. Clicking on it will add another hour in your end time."),c.a.createElement("li",{className:"small text-dark"},"Do remember to vacate by clicking again at the end of the meeting."))}function y(e){var t=e.keyValue,a=e.name,n=e.item,o=e.enabled,i=e.onClick,l=e.occupied,s=e.user,r=e.status,m=e.time,u=e.showExtend,d=e.handleExtend;return c.a.createElement("div",{className:"d-flex justify-content-between align-items-center list"},c.a.createElement("p",{className:"text-info font-weight-bold",key:t},a),c.a.createElement("div",{className:"d-flex  justify-content-between "},c.a.createElement("p",{className:"tab text-info px-2"},m),u&&s===n?c.a.createElement("p",{className:"tab text-danger hand px-2 ",onClick:d},"Book again"):null,n?c.a.createElement("p",{className:"tab text-success px-3"},n):c.a.createElement("p",{className:"tab text-info px-3"},"Vacant"),c.a.createElement("div",{style:{borderColor:r?"#0c9":"#999",display:r?"block":-1===l.indexOf(s)&&o?"block":"none"},className:"box",onClick:i})))}var N=a(34),w=a.n(N);function k(e){return c.a.createElement("div",{className:"loading d-flex justify-content-center align-items-center h-75 flex-column",style:e},c.a.createElement("img",{src:w.a,alt:"loader"}),c.a.createElement("p",{className:"text-info"},"Updating status ..."))}var O=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),l=Object(d.a)(i,2),r=l[0],f=l[1],b=Object(n.useContext)(p),h=b.user,v=b.signIn,E=Object(n.useState)(!1),N=Object(d.a)(E,2),w=N[0],O=N[1];Object(n.useEffect)(function(){setInterval(function(){I()},1e3)},[]);var j=function(){m.a.database().ref("Rooms/").set({data:a})},I=function(){O(!0),m.a.database().ref("Rooms/").on("value",function(e){o(e.val().data),O(!1)}),m.a.database().ref("Occupy/").on("value",function(e){f(e.val()),O(!1)})},S=function(e){var t=g()(g()(g.a.unix(e).toLocaleString()).add(60,"m").toLocaleString()),a=g.a.unix(g()().unix()).toLocaleString();return t.diff(a,"minutes")},C=function(e,t,a){var n=e-1,c={enabled:!0,id:e,name:t,occupant:"",status:!1,timestamp:null};m.a.database().ref("Occupy/").on("value",function(e){for(var t in e.val())e.val()[t].User===a&&m.a.database().ref().child("Occupy/"+t).remove()}),m.a.database().ref("Rooms/data").child(n).set(c)},R=(r?Array.from(Object.values(r)):["Dummy User"]).map(function(e){return e.User});if(!v)return c.a.createElement(s.a,{to:"/"});var U=a.filter(function(e){return""===e.occupant}).length,A=0===U?"No room":1===U?"1 room":"".concat(U," rooms"),B="No room"===A?"tomato":"#0c9";return c.a.createElement("div",{className:"bg"},c.a.createElement("div",{className:"container position-relative vh-100"},c.a.createElement(x,{style:{color:B},src:h&&h.photoURL,onClick:function(){return m.a.auth().signOut()},stats:A}),w?c.a.createElement(k,{style:{display:w?"flex":"none"}}):void 0!==a?a.map(function(e){return c.a.createElement(y,{keyValue:e.id,name:e.name,item:e.occupant,status:e.status,occupied:R,user:h.displayName,enabled:e.enabled,time:isNaN(S(e.timestamp))?null:S(e.timestamp)<=0?C(e.id,e.name,e.occupant):(S(e.timestamp)>0&&S(e.timestamp),S(e.timestamp)+" mins left"),onClick:function(){return function(e){var t,n=a.some(function(e){return e.occupant===h.displayName});t=a.map(function(t){if(n||t.id!==e||""!==t.occupant){if(n&&t.id===e&&t.occupant===h.displayName)for(var a in t.status=!t.status,t.occupant="",t.timestamp=null,r)r[a].User===h.displayName&&m.a.database().ref().child("Occupy/"+a).remove()}else{t.status=!t.status,t.occupant=h.displayName,t.enabled=!0,t.timestamp=g()().unix();var c={RoomId:t.id,User:h.displayName,timestamp:g()().unix()};m.a.database().ref("Occupy").push(c)}return t}),o(t),j()}(e.id)},handleExtend:function(){return function(e,t,a){var n=e-1,c={enabled:!0,id:e,name:t,occupant:a,status:!0,timestamp:g()().unix()};m.a.database().ref("Rooms/data").child(n).set(c)}(e.id,e.name,e.occupant)},showExtend:e.status&&S(e.timestamp)<=5})}):c.a.createElement("p",null,"Please ask your administrator to add rooms."),c.a.createElement(u,null)))},j=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(f,null,c.a.createElement(l.a,{basename:"/Quiped"},c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:v}),c.a.createElement(s.b,{exact:!0,path:"/dashboard",component:O})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.disableYellowBox=!0,i.a.render(c.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.84805bca.chunk.js.map